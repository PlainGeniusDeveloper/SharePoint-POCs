To remove all formatting, including inline styles, from the pasted content in CKEditor, you can use the pasteFilter configuration option or handle the paste event to sanitize the content.

Option 1: Using pasteFilter

CKEditor provides a built-in pasteFilter option to control what content is allowed during pasting. You can set it to 'plain-text' or configure specific rules.

Example with pasteFilter

CKEDITOR.replace('editor1', {
  allowedContent: false, // Disallow all inline styles and formatting
  pasteFilter: 'plain-text' // Converts pasted content to plain text
});

Option 2: Using the paste Event

You can listen for the paste event and sanitize the content by stripping out all inline styles or converting the pasted content into plain text.

Example with paste Event

CKEDITOR.replace('editor1', {
  on: {
    paste: function (evt) {
      // Get the raw pasted content
      const pastedData = evt.data.dataValue;

      // Create a temporary DOM element to parse the HTML
      const tempDiv = document.createElement('div');
      tempDiv.innerHTML = pastedData;

      // Remove all inline styles
      const elements = tempDiv.querySelectorAll('*');
      elements.forEach(element => {
        element.removeAttribute('style');
        element.removeAttribute('class'); // Optionally remove classes too
      });

      // Set the sanitized content back to the event data
      evt.data.dataValue = tempDiv.innerHTML;
    }
  }
});

Option 3: Convert to Plain Text with pastefromword Plugin

If you use the pastefromword plugin, you can convert pasted content from Word or other rich editors into plain text.

Example with pastefromword Plugin

CKEDITOR.replace('editor1', {
  extraPlugins: 'pastefromword',
  forcePasteAsPlainText: true // Forces plain text pasting
});

Explanation

1. pasteFilter:

When set to 'plain-text', CKEditor removes all formatting, converting the content into plain text.



2. paste Event:

Allows you to manipulate the pasted content programmatically before it is inserted into the editor.

Inline styles and classes can be removed by iterating over the DOM elements in the pasted content.



3. pastefromword Plugin:

Specialized for cleaning up content pasted from Microsoft Word.

forcePasteAsPlainText ensures only plain text is inserted.




Final Result

With these methods, any pasted content in CKEditor will be stripped of all formatting, inline styles, and unnecessary attributes. Use the method that best fits your use case.

