To include a search box for filtering countries dynamically within the dropdown, you can use jQuery to filter the displayed list of countries as the user types into the search box.

Hereâ€™s how you can integrate a search box into the dropdown:


---

Updated Code with Search Box:

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Select with Search and Notes</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .dropdown-container {
            margin-bottom: 20px;
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }

        .dropdown-item input[type="text"] {
            margin-left: 10px;
            display: none; /* Hidden until checkbox is checked */
        }

        .save-edit-buttons button {
            margin-right: 10px;
        }

        #countrySearch {
            margin-bottom: 10px;
            padding: 5px;
            width: 100%;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h2>Multi-Select with Search, Checkboxes, and Notes</h2>
    <form id="cascadingForm">
        <!-- Search box for filtering countries -->
        <input type="text" id="countrySearch" placeholder="Search for a country...">

        <div class="dropdown-container" id="dropdownContainer">
            <!-- Dynamic checkboxes and notes will be added here -->
        </div>

        <!-- Save and Edit Buttons -->
        <div class="save-edit-buttons">
            <button type="button" id="saveButton">Save</button>
            <button type="button" id="editButton" style="display: none;">Edit</button>
        </div>
    </form>

    <script>
        $(document).ready(function () {
            // Mock data for Regions and Countries
            const data = {
                regions: [
                    { id: 1, name: "North America" },
                    { id: 2, name: "Europe" },
                    { id: 3, name: "Asia" }
                ],
                countries: [
                    { id: 101, name: "USA", regionId: 1 },
                    { id: 102, name: "Canada", regionId: 1 },
                    { id: 201, name: "Germany", regionId: 2 },
                    { id: 202, name: "France", regionId: 2 },
                    { id: 301, name: "India", regionId: 3 },
                    { id: 302, name: "China", regionId: 3 }
                ]
            };

            const $dropdownContainer = $("#dropdownContainer");
            const $countrySearch = $("#countrySearch");
            let savedSelections = { selectedItems: [], notes: {} };

            // Populate checkboxes with regions and countries
            function populateDropdown() {
                $dropdownContainer.empty();

                data.regions.forEach(region => {
                    // Add region label
                    const $regionLabel = $("<strong>")
                        .text(region.name)
                        .css("display", "block")
                        .css("margin-top", "10px");
                    $dropdownContainer.append($regionLabel);

                    // Add countries under the region
                    data.countries
                        .filter(country => country.regionId === region.id)
                        .forEach(country => {
                            const $dropdownItem = $("<div>")
                                .addClass("dropdown-item")
                                .attr("data-country-name", country.name.toLowerCase());

                            const $checkbox = $("<input>")
                                .attr("type", "checkbox")
                                .attr("id", `country-${country.id}`)
                                .attr("data-country-id", country.id)
                                .attr("data-country-name", country.name);

                            const $label = $("<label>")
                                .attr("for", `country-${country.id}`)
                                .text(country.name);

                            const $input = $("<input>")
                                .attr("type", "text")
                                .attr("placeholder", `Note for ${country.name}`)
                                .attr("data-country-id", country.id);

                            // Append checkbox, label, and input to the dropdown item
                            $dropdownItem.append($checkbox, $label, $input);
                            $dropdownContainer.append($dropdownItem);

                            // Show/hide input on checkbox toggle
                            $checkbox.change(function () {
                                $input.toggle(this.checked);
                            });
                        });
                });
            }

            // Search functionality
            $countrySearch.on("input", function () {
                const searchTerm = $(this).val().toLowerCase();

                $dropdownContainer.find(".dropdown-item").each(function () {
                    const countryName = $(this).data("country-name");
                    if (countryName.includes(searchTerm)) {
                        $(this).show(); // Show matching item
                    } else {
                        $(this).hide(); // Hide non-matching item
                    }
                });
            });

            // Save selections and notes
            $("#saveButton").click(function () {
                savedSelections.selectedItems = [];
                savedSelections.notes = {};

                // Loop through all checkboxes and collect selections
                $dropdownContainer.find("input[type='checkbox']").each(function () {
                    const isChecked = $(this).is(":checked");
                    const countryId = $(this).data("country-id");

                    if (isChecked) {
                        savedSelections.selectedItems.push(countryId);
                        const note = $(`input[type="text"][data-country-id="${countryId}"]`).val();
                        savedSelections.notes[countryId] = note || "";
                    }
                });

                alert("Selections and notes saved!");
                console.log(savedSelections);

                // Hide save and show edit
                $("#saveButton").hide();
                $("#editButton").show();

                // Disable checkboxes and inputs
                $dropdownContainer.find("input").prop("disabled", true);
            });

            // Edit selections and notes
            $("#editButton").click(function () {
                // Enable checkboxes and inputs
                $dropdownContainer.find("input").prop("disabled", false);

                // Show save button again
                $("#saveButton").show();
                $("#editButton").hide();
            });

            // Initial load
            populateDropdown();

            // If saved selections exist, populate them
            if (savedSelections.selectedItems.length > 0) {
                savedSelections.selectedItems.forEach(countryId => {
                    $(`#country-${countryId}`).prop("checked", true).trigger("change");
                    $(`input[type="text"][data-country-id="${countryId}"]`).val(
                        savedSelections.notes[countryId] || ""
                    );
                });
            }
        });
    </script>
</body>
</html>


---

How It Works:

1. Search Box:

A <input> field with id="countrySearch" allows users to type search terms.

The search input filters country options using the data-country-name attribute.



2. Dynamic Filtering:

As the user types, each .dropdown-item is checked against the search term.

Matching items are shown, and others are hidden.



3. Save and Edit:

Save and edit functionality is preserved and works seamlessly with the search feature.





---

Key Features:

User-Friendly Search: Quickly find a country in the dropdown using partial or full names.

Dynamic Notes: Attach notes to selected countries.

Persistent State: Save and restore user selections and notes.


This implementation offers an intuitive multi-select dropdown with advanced filtering and note management.

