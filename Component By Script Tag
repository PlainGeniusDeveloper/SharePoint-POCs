<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Tab Content Loader</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <!-- Tabs -->
    <div class="tabs">
        <button class="tab-link" data-tab="Overview">Overview</button>
        <button class="tab-link" data-tab="Features">Features</button>
        <button class="tab-link" data-tab="Dropdown">Dropdown</button>
    </div>

    <!-- Containers for tab content -->
    <div id="tab-Overview" class="tab-content"></div>
    <div id="tab-Features" class="tab-content"></div>
    <div id="tab-Dropdown" class="tab-content"></div>

    <!-- Container for appending templates before binding data -->
    <div id="ws_container"></div>

    <!-- Templates for different content types -->
    <script type="text/template" id="summary-template">
        <div class="summary-section">
            <h2>{{titleName}}</h2>
            <p>{{description}}</p>
        </div>
    </script>

    <script type="text/template" id="accordion-template">
        <div class="accordion-section">
            <h2>{{titleName}}</h2>
            <div class="accordion-content">
                {{accordionItems}}
            </div>
        </div>
    </script>

    <script type="text/template" id="dropdown-template">
        <div class="dropdown-section">
            <h2>{{titleName}}</h2>
            <select>
                {{dropdownItems}}
            </select>
        </div>
    </script>

    <!-- Main JavaScript logic -->
    <script>
        // Example JSON data
        const jsonData = {
            "tabDetails": [
                {
                    "tabName": "Overview",
                    "titleName": "Overview Title",
                    "description": "This is the overview content."
                },
                {
                    "tabName": "Features",
                    "titleName": "Features Title",
                    "description": "This is the features content.",
                    "tabAccordionList": [
                        {
                            "title": "Accordion Item 1",
                            "description": "Content for accordion item 1."
                        },
                        {
                            "title": "Accordion Item 2",
                            "description": "Content for accordion item 2."
                        }
                    ]
                },
                {
                    "tabName": "Dropdown",
                    "titleName": "Dropdown Menu",
                    "dropdownList": [
                        "Option 1",
                        "Option 2",
                        "Option 3"
                    ]
                }
            ]
        };

        // Function to replace placeholders with actual data
        function bindDataToTemplate(template, data) {
            Object.keys(data).forEach(key => {
                const regex = new RegExp(`{{${key}}}`, 'g'); // Placeholder syntax {{key}}
                template = template.replace(regex, data[key]);
            });
            return template;
        }

        // Function to get template content
        function getTemplate(templateId) {
            return $(`#${templateId}`).html(); // Fetch the template content
        }

        // Function to create accordion items
        function createAccordionItems(items) {
            return items.map(item => {
                return `<div class="accordion-item">
                            <h3>${item.title}</h3>
                            <p>${item.description}</p>
                        </div>`;
            }).join('');
        }

        // Function to create dropdown options
        function createDropdownItems(items) {
            return items.map(item => {
                return `<option value="${item}">${item}</option>`;
            }).join('');
        }

        // Mapping content types to their templates and processing functions
        const contentTypeHandlers = {
            "Summary": (content) => {
                return bindDataToTemplate(getTemplate('summary-template'), {
                    titleName: content.titleName,
                    description: content.description
                });
            },
            "Accordion": (content) => {
                const accordionItems = createAccordionItems(content.tabAccordionList);
                return bindDataToTemplate(getTemplate('accordion-template'), {
                    titleName: content.titleName,
                    accordionItems: accordionItems
                });
            },
            "Dropdown": (content) => {
                const dropdownItems = createDropdownItems(content.dropdownList);
                return bindDataToTemplate(getTemplate('dropdown-template'), {
                    titleName: content.titleName,
                    dropdownItems: dropdownItems
                });
            }
        };

        // Function to bind content to the correct tab
        function bindTabContent() {
            jsonData.tabDetails.forEach(tabDetail => {
                const tabName = tabDetail.tabName;
                
                // Clear existing content in the target tab
                $(`#tab-${tabName}`).empty();

                let htmlContent = '';

                // Determine the content type and bind the data accordingly
                if (tabDetail.tabAccordionList) {
                    htmlContent = contentTypeHandlers["Accordion"](tabDetail);
                } else if (tabDetail.dropdownList) {
                    htmlContent = contentTypeHandlers["Dropdown"](tabDetail);
                } else {
                    htmlContent = contentTypeHandlers["Summary"](tabDetail);
                }

                // Append the template to the ws_container
                $('#ws_container').append(htmlContent);

                // Now bind the data to the corresponding tab
                $(`#tab-${tabName}`).append($('#ws_container').html());

                // Clear ws_container for the next template
                $('#ws_container').empty();
            });
        }

        // Call the function to bind tab content on page load
        $(document).ready(function() {
            bindTabContent(); // Populate the tab content from JSON
        });
    </script>
</body>
</html>
